<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Alert manager #  {% code title=&ldquo;alertmanager.yml&rdquo; %}
global: resolve_timeout: 1m slack_api_url: 'https://hooks.slack.com/services/xxx' route: # When a new group of alerts is created by an incoming alert, wait at # least 'group_wait' to send the initial notification. # This way ensures that you get multiple alerts for the same group that start # firing shortly after another are batched together on the first # notification. group_wait: 10s # When the first notification was sent, wait 'group_interval' to send a batch # of new alerts that started firing for that group.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content>
<meta property="og:description" content="Alert manager #  {% code title=&ldquo;alertmanager.yml&rdquo; %}
global: resolve_timeout: 1m slack_api_url: 'https://hooks.slack.com/services/xxx' route: # When a new group of alerts is created by an incoming alert, wait at # least 'group_wait' to send the initial notification. # This way ensures that you get multiple alerts for the same group that start # firing shortly after another are batched together on the first # notification. group_wait: 10s # When the first notification was sent, wait 'group_interval' to send a batch # of new alerts that started firing for that group.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://docs.cuong-dev.ml/docs/monitoring/alert-manager/"><meta property="article:section" content="docs">
<title>Alert Manager | Cuong Blogs</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css integrity="sha256-gsXb0jRHzuC0wqo+0Izglh+qQOH6Nw7uT4yfAuDUa18=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.b005cff9113c07f7a3e9b382e502a1d9a53f4b137955f56f357f8ea8253a29fd.js integrity="sha256-sAXP+RE8B/ej6bOC5QKh2aU/SxN5VfVvNX+OqCU6Kf0=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>Cuong Blogs</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<span>Aws</span>
<ul>
<li>
<a href=/docs/aws/extend-the-file-system-of-ebs-volumes/>Extend the File System of Ebs Volumes</a>
</li>
<li>
<a href=/docs/aws/install-cert-bot-ssl-letsencrypt-on-amz-linux-2/>Install Cert Bot Ssl Letsencrypt on Amz Linux 2</a>
</li>
<li>
<a href=/docs/aws/mount-new-ebs-volume-to-aws-ec2/>Mount New Ebs Volume to Aws Ec2</a>
</li>
<li>
<a href=/docs/aws/setting-swap-ec2/>Setting Swap Ec2</a>
</li>
<li>
<a href=/docs/aws/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>Azure</span>
<ul>
<li>
<a href=/docs/azure/azure-2/>Azure 2</a>
</li>
<li>
<a href=/docs/azure/azure-new-service-update/>Azure New Service Update</a>
</li>
<li>
<a href=/docs/azure/untitled-3/>Untitled 3</a>
</li>
<li>
<a href=/docs/azure/untitled-copy/>Untitled Copy</a>
</li>
<li>
<a href=/docs/azure/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>Cheatsheet</span>
<ul>
<li>
<a href=/docs/cheatsheet/bash/>Bash</a>
</li>
<li>
<a href=/docs/cheatsheet/docker-cheatsheet/>Docker Cheatsheet</a>
</li>
<li>
<a href=/docs/cheatsheet/grep/>Grep</a>
</li>
</ul>
</li>
<li>
<span>Databases</span>
<ul>
<li>
<a href=/docs/databases/install-postgres-client-amazon-linux-1/>Install Postgres Client Amazon Linux 1</a>
</li>
<li>
<a href=/docs/databases/postgres-create-user-and-grant-permistions/>Postgres Create User and Grant Permistions</a>
</li>
</ul>
</li>
<li>
<span>Docker</span>
<ul>
<li>
<a href=/docs/docker/checking-file-when-build-docker/>Checking File When Build Docker</a>
</li>
<li>
<a href=/docs/docker/disstroless-docker-image/>Disstroless Docker Image</a>
</li>
<li>
<a href=/docs/docker/docker-how-to-cleanup-unused-resources/>Docker How to Cleanup Unused Resources</a>
</li>
<li>
<a href=/docs/docker/quick-install-docker/>Quick Install Docker</a>
</li>
<li>
<a href=/docs/docker/remove-unused-docker-resource/>Remove Unused Docker Resource</a>
</li>
<li>
<a href=/docs/docker/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>Gcp</span>
<ul>
<li>
<a href=/docs/gcp/mistakes-to-avoid-when-using-google-cloud/>Mistakes to Avoid When Using Google Cloud</a>
</li>
<li>
<a href=/docs/gcp/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>Jenkins</span>
<ul>
<li>
<a href=/docs/jenkins/jenkins-fix-report-cannot-view-on-browser/>Jenkins Fix Report Cannot View on Browser</a>
</li>
<li>
<a href=/docs/jenkins/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>K8s</span>
<ul>
<li>
<a href=/docs/k8s/kubectl-tips-and-tricks/>Kubectl Tips and Tricks</a>
</li>
<li>
<a href=/docs/k8s/untitled/>Untitled</a>
</li>
</ul>
</li>
<li>
<span>Linux</span>
<ul>
<li>
<a href=/docs/linux/check-ssl-certificate-expiration-date-s/>Check Ssl Certificate Expiration Date S</a>
</li>
<li>
<a href=/docs/linux/dynamic-port-mapping-for-access-ftp-server/>Dynamic Port Mapping for Access FTP Server</a>
</li>
<li>
<a href=/docs/linux/print-all-duplicated/>Print All Duplicated</a>
</li>
<li>
<a href=/docs/linux/quick-load-.env-file/>Quick Load .Env File</a>
</li>
<li>
<a href=/docs/linux/writing-bash-shell-scripts-best-practice/>Writing Bash Shell Scripts Best Practice</a>
</li>
</ul>
</li>
<li>
<span>Monitoring</span>
<ul>
<li>
<a href=/docs/monitoring/alert-manager/ class=active>Alert Manager</a>
</li>
<li>
<a href=/docs/monitoring/install-node_exporter-as-systemd/>Install Node Exporter as Systemd</a>
</li>
</ul>
</li>
<li>
<span>Others</span>
<ul>
<li>
<a href=/docs/others/alert-slack-by-hook/>Alert Slack by Hook</a>
</li>
<li>
<a href=/docs/others/install-redmine-on-centos-7/>Install Redmine on Centos 7</a>
</li>
</ul>
</li>
<li>
<a href=/docs/about-me/>Introduction</a>
<ul>
</ul>
</li>
</ul>
<ul>
<li>
<a href=/posts/>
Blog
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Alert Manager</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents></nav>
</aside>
</header>
<article class=markdown><h1 id=alert-manager>
Alert manager
<a class=anchor href=#alert-manager>#</a>
</h1>
<p>{% code title=&ldquo;alertmanager.yml&rdquo; %}</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>global:
  resolve_timeout: 1m
  slack_api_url: <span style=color:#e6db74>&#39;https://hooks.slack.com/services/xxx&#39;</span>
route:
  <span style=color:#75715e># When a new group of alerts is created by an incoming alert, wait at</span>
  <span style=color:#75715e># least &#39;group_wait&#39; to send the initial notification.</span>
  <span style=color:#75715e># This way ensures that you get multiple alerts for the same group that start</span>
  <span style=color:#75715e># firing shortly after another are batched together on the first</span>
  <span style=color:#75715e># notification.</span>
  group_wait: 10s

  <span style=color:#75715e># When the first notification was sent, wait &#39;group_interval&#39; to send a batch</span>
  <span style=color:#75715e># of new alerts that started firing for that group.</span>
  group_interval: 15m

  <span style=color:#75715e># If an alert has successfully been sent, wait &#39;repeat_interval&#39; to</span>
  <span style=color:#75715e># resend them.</span>
  repeat_interval: 15m

  <span style=color:#75715e># A default receiver</span>
  receiver: <span style=color:#e6db74>&#34;slack-warning&#34;</span>

  <span style=color:#75715e># All the above attributes are inherited by all child routes and can</span>
  <span style=color:#75715e># overwritten on each.</span>
  routes:
    - receiver: <span style=color:#e6db74>&#34;slack-critical&#34;</span>
      group_wait: 10s
      match_re:
        severity: critical
      <span style=color:#66d9ef>continue</span>: true
      group_by: <span style=color:#f92672>[</span>alertname, severity, app<span style=color:#f92672>]</span>
    - receiver: <span style=color:#e6db74>&#34;slack-warning&#34;</span>
      group_wait: 10s
      match_re:
        severity: warning|info
      <span style=color:#66d9ef>continue</span>: true
      group_by: <span style=color:#f92672>[</span>alertname, severity, app<span style=color:#f92672>]</span>

receivers:
  - name: <span style=color:#e6db74>&#34;slack-critical&#34;</span>
    slack_configs:
      - api_url: <span style=color:#e6db74>&#39;https://hooks.slack.com/services/xxx&#39;</span>
        channel: <span style=color:#e6db74>&#39;alert-manager&#39;</span>
        color: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.color&#34; . }}&#39;</span>
        title: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.title&#34; . }}&#39;</span>
        text: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.text&#34; . }}&#39;</span>
        send_resolved: true
        actions:
          - type: button
            text: <span style=color:#e6db74>&#39;Runbook :green_book:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).Annotations.runbook_url }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Query :mag:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).GeneratorURL }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Dashboard :chart_with_upwards_trend:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).Annotations.dashboard_url }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Silence :no_bell:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ template &#34;__alert_silence_link&#34; . }}&#39;</span>
          <span style=color:#75715e># - type: button</span>
          <span style=color:#75715e>#   text: &#39;{{ template &#34;slack.scs.link_button_text&#34; . }}&#39;</span>
          <span style=color:#75715e>#   url: &#39;{{ .CommonAnnotations.link_url }}&#39;</span>
  - name: <span style=color:#e6db74>&#34;slack-warning&#34;</span>
    slack_configs:
      - api_url: <span style=color:#e6db74>&#39;https://hooks.slack.com/services/xxx&#39;</span>
        channel: <span style=color:#e6db74>&#39;alert-manager&#39;</span>
        color: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.color&#34; . }}&#39;</span>
        title: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.title&#34; . }}&#39;</span>
        text: <span style=color:#e6db74>&#39;{{ template &#34;slack.scs.text&#34; . }}&#39;</span>
        send_resolved: false
        actions:
          - type: button
            text: <span style=color:#e6db74>&#39;Runbook :green_book:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).Annotations.runbook_url }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Query :mag:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).GeneratorURL }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Dashboard :chart_with_upwards_trend:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ (index .Alerts 0).Annotations.dashboard_url }}&#39;</span>
          - type: button
            text: <span style=color:#e6db74>&#39;Silence :no_bell:&#39;</span>
            url: <span style=color:#e6db74>&#39;{{ template &#34;__alert_silence_link&#34; . }}&#39;</span>
          <span style=color:#75715e># - type: button</span>
          <span style=color:#75715e>#   text: &#39;{{ template &#34;slack.scs.link_button_text&#34; . }}&#39;</span>
          <span style=color:#75715e>#   url: &#39;{{ .CommonAnnotations.link_url }}&#39;</span>
templates: <span style=color:#f92672>[</span><span style=color:#e6db74>&#39;/etc/alertmanager/templates/*.tmpl&#39;</span><span style=color:#f92672>]</span>
</code></pre></div><p>{% endcode %}</p>
<p>Alert rules:</p>
<p>{% tabs %}
{% tab title=&ldquo;backbox&rdquo; %}</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>groups:
- name: BlackboxGroup
  rules:
  - alert: WebDown
    expr: probe_success <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>for</span>: 2m
    labels:
      severity: critical
    annotations:
      summary: <span style=color:#e6db74>&#34;{{ </span>$labels<span style=color:#e6db74>.instance }} is down&#34;</span>
      description: <span style=color:#e6db74>&#39;HTTP check failed&#39;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/UV2ducRnk/blackbox-exporter-http-prober?orgId=1&#34;</span>

  <span style=color:#75715e># - alert: BlackboxProbeHttpFailure</span>
  <span style=color:#75715e>#   expr: probe_http_status_code &lt;= 199 OR probe_http_status_code &gt;= 400</span>
  <span style=color:#75715e>#   for: 0m</span>
  <span style=color:#75715e>#   labels:</span>
  <span style=color:#75715e>#     severity: critical</span>
  <span style=color:#75715e>#   annotations:</span>
  <span style=color:#75715e>#     summary: Blackbox probe HTTP failure (instance {{ $labels.instance }})</span>
  <span style=color:#75715e>#     description: &#34;HTTP status code is not 200-399\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}&#34;</span>
  <span style=color:#75715e># - alert: BlackboxSslCertificateWillExpireSoon</span>

  - alert: SSLCertExpired
    expr: probe_ssl_earliest_cert_expiry - time<span style=color:#f92672>()</span> &lt; <span style=color:#ae81ff>86400</span> * <span style=color:#ae81ff>7</span>
    <span style=color:#66d9ef>for</span>: 2d
    labels:
      severity: warning
    annotations:
      summary: <span style=color:#e6db74>&#34;SSL certificate will expire soon&#34;</span>
      description: <span style=color:#e6db74>&#34;{{ </span>$labels<span style=color:#e6db74>.instance }} - Remaining time: `{{ humanizeDuration </span>$value<span style=color:#e6db74> }}`&#34;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/UV2ducRnk/blackbox-exporter-http-prober?orgId=1&#34;</span>

  - alert: SSLCertExpired
    expr: probe_ssl_earliest_cert_expiry - time<span style=color:#f92672>()</span> &lt; <span style=color:#ae81ff>86400</span> * <span style=color:#ae81ff>3</span>
    <span style=color:#66d9ef>for</span>: 1d
    labels:
      severity: critical
    annotations:
      summary: <span style=color:#e6db74>&#34;SSL certificate will expire soon&#34;</span>
      description: <span style=color:#e6db74>&#34;{{ </span>$labels<span style=color:#e6db74>.instance }} - Remaining time: `{{ humanizeDuration </span>$value<span style=color:#e6db74> }}`&#34;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/UV2ducRnk/blackbox-exporter-http-prober?orgId=1&#34;</span>

  <span style=color:#75715e># - alert: BlackboxSslCertificateExpired</span>
  <span style=color:#75715e>#   expr: probe_ssl_earliest_cert_expiry - time() &lt;= 0</span>
  <span style=color:#75715e>#   for: 0m</span>
  <span style=color:#75715e>#   labels:</span>
  <span style=color:#75715e>#     severity: critical</span>
  <span style=color:#75715e>#   annotations:</span>
  <span style=color:#75715e>#     summary: Blackbox SSL certificate expired (instance {{ $labels.instance }})</span>
  <span style=color:#75715e>#     description: &#34;SSL certificate has expired already\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}&#34;</span>
  
  <span style=color:#75715e># - alert: BlackboxProbeSlowHttp</span>
  <span style=color:#75715e>#   expr: avg_over_time(probe_http_duration_seconds[1m]) &gt; 1</span>
  <span style=color:#75715e>#   for: 1m</span>
  <span style=color:#75715e>#   labels:</span>
  <span style=color:#75715e>#     severity: warning</span>
  <span style=color:#75715e>#   annotations:</span>
  <span style=color:#75715e>#     summary: Blackbox probe slow HTTP (instance {{ $labels.instance }})</span>
  <span style=color:#75715e>#     description: &#34;HTTP request took more than 1s\n  VALUE = {{ $value }}\n  LABELS = {{ $labels }}&#34;</span>
</code></pre></div><p>{% endtab %}</p>
<p>{% tab title=&ldquo;node&rdquo; %}</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>groups:
- name: node_exporter
  rules:
  - alert: OutOfMemory
    expr: 100-<span style=color:#f92672>(</span>node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100<span style=color:#f92672>)</span> &gt; <span style=color:#ae81ff>95</span>
    <span style=color:#66d9ef>for</span>: 5m
    labels:
      severity: warning
    annotations:
      summary: <span style=color:#e6db74>&#34;`{{ </span>$labels<span style=color:#e6db74>.job }}` out of RAM&#34;</span>
      description: <span style=color:#e6db74>&#39;RAM used &gt; 95% for 5mins. Current value = `{{ printf &#34;%.2f&#34; $value }}%`&#39;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/hb7fSE0Zz/scs-servers?orgId=1&amp;var-job={{ </span>$labels<span style=color:#e6db74>.job }}&amp;var-hostname=All&amp;var-node={{ </span>$labels<span style=color:#e6db74>.instance }}&#34;</span>

  <span style=color:#75715e># Please add ignored mountpoints in node_exporter parameters like</span>
  <span style=color:#75715e># &#34;--collector.filesystem.ignored-mount-points=^/(sys|proc|dev|run)($|/)&#34;.</span>
  <span style=color:#75715e># Same rule using &#34;node_filesystem_free_bytes&#34; will fire when disk fills for non-root users.</span>
  - alert: OutOfDisk
    expr:   <span style=color:#f92672>(</span> 100-<span style=color:#f92672>(</span>node_filesystem_avail_bytes / node_filesystem_size_bytes * 100<span style=color:#f92672>)</span> &gt; <span style=color:#ae81ff>95</span> and node_filesystem_readonly <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span>
    <span style=color:#66d9ef>for</span>: 1h
    labels:
      severity: warning
    annotations:
      summary: <span style=color:#e6db74>&#34;`{{ </span>$labels<span style=color:#e6db74>.job }}` out of disk&#34;</span>
      description: <span style=color:#e6db74>&#39;Disk used &gt; 95%. Current value `{{ printf &#34;%.2f&#34; $value }}%`&#39;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/hb7fSE0Zz/scs-servers?orgId=1&amp;var-job={{ </span>$labels<span style=color:#e6db74>.job }}&amp;var-hostname=All&amp;var-node={{ </span>$labels<span style=color:#e6db74>.instance }}&#34;</span>

<span style=color:#75715e>#  - alert: OutOfDisk</span>
<span style=color:#75715e>#     expr:   ( 100-(node_filesystem_avail_bytes / node_filesystem_size_bytes * 100) &gt; 95 and node_filesystem_readonly == 0)</span>
<span style=color:#75715e>#     for: 1h</span>
<span style=color:#75715e>#     labels:</span>
<span style=color:#75715e>#       severity: critical</span>
<span style=color:#75715e>#     annotations:</span>
<span style=color:#75715e>#       summary: &#34;&lt;!channel&gt; `{{ $labels.job }}` out of disk&#34;</span>
<span style=color:#75715e>#       description: &#39;Disk used &gt; 95%. Current value `{{ printf &#34;%.2f&#34; $value }}%`&#39;</span>
<span style=color:#75715e>#       dashboard_url: &#34;dashboard/d/hb7fSE0Zz/scs-servers?orgId=1&amp;var-job={{ $labels.job }}&amp;var-hostname=All&amp;var-node={{ $labels.instance }}&#34;</span>

  - alert: HighCpuLoad
    expr: <span style=color:#ae81ff>100</span> - <span style=color:#f92672>(</span>avg by<span style=color:#f92672>(</span>instance,job<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>rate<span style=color:#f92672>(</span>node_cpu_seconds_total<span style=color:#f92672>{</span>mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;idle&#34;</span><span style=color:#f92672>}[</span>5m<span style=color:#f92672>]))</span> * 100<span style=color:#f92672>)</span> &gt; <span style=color:#ae81ff>95</span>
    <span style=color:#66d9ef>for</span>: 0m
    labels:
      severity: warning
    annotations:
      summary: <span style=color:#e6db74>&#34;`{{ </span>$labels<span style=color:#e6db74>.job }}` high CPU load&#34;</span>
      description: <span style=color:#e6db74>&#39;CPU load &gt; 95% for 5mins. Current value = `{{ printf &#34;%.2f&#34; $value }}%`&#39;</span>
      dashboard_url: <span style=color:#e6db74>&#34;dashboard/d/hb7fSE0Zz/scs-servers?orgId=1&amp;var-job={{ </span>$labels<span style=color:#e6db74>.job }}&amp;var-hostname=All&amp;var-node={{ </span>$labels<span style=color:#e6db74>.instance }}&#34;</span>

</code></pre></div><p>{% endtab %}</p>
<p>{% tab title=&ldquo;template&rdquo; %}</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>{{</span> define <span style=color:#e6db74>&#34;__alert_silence_link&#34;</span> -<span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span> .ExternalURL <span style=color:#f92672>}}</span>/#/silences/new?filter<span style=color:#f92672>=</span>%7B
    <span style=color:#f92672>{{</span>- range .CommonLabels.SortedPairs -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>if</span> ne .Name <span style=color:#e6db74>&#34;alertname&#34;</span> -<span style=color:#f92672>}}</span>
            <span style=color:#f92672>{{</span>- .Name <span style=color:#f92672>}}</span>%3D<span style=color:#e6db74>&#34;{{- .Value -}}&#34;</span>%2C%20
        <span style=color:#f92672>{{</span>- end -<span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- end -<span style=color:#f92672>}}</span>
    alertname%3D<span style=color:#e6db74>&#34;{{- .CommonLabels.alertname -}}&#34;</span>%7D
<span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

<span style=color:#f92672>{{</span> define <span style=color:#e6db74>&#34;__alert_severity&#34;</span> -<span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>if</span> eq .CommonLabels.severity <span style=color:#e6db74>&#34;critical&#34;</span> -<span style=color:#f92672>}}</span>
    *Severity:* &lt;!channel&gt; <span style=color:#e6db74>`</span>Critical<span style=color:#e6db74>`</span>
    <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> eq .CommonLabels.severity <span style=color:#e6db74>&#34;warning&#34;</span> -<span style=color:#f92672>}}</span>
    *Severity:* <span style=color:#e6db74>`</span>Warning<span style=color:#e6db74>`</span>
    <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> eq .CommonLabels.severity <span style=color:#e6db74>&#34;info&#34;</span> -<span style=color:#f92672>}}</span>
    *Severity:* <span style=color:#e6db74>`</span>Info<span style=color:#e6db74>`</span>
    <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>else</span> -<span style=color:#f92672>}}</span>
    *Severity:* :question: <span style=color:#f92672>{{</span> .CommonLabels.severity <span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>
<span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

<span style=color:#f92672>{{</span> define <span style=color:#e6db74>&#34;slack.scs.title&#34;</span> -<span style=color:#f92672>}}</span>
  <span style=color:#f92672>[{{</span> .Status | toUpper -<span style=color:#f92672>}}</span>
  <span style=color:#f92672>{{</span> <span style=color:#66d9ef>if</span> eq .Status <span style=color:#e6db74>&#34;firing&#34;</span> <span style=color:#f92672>}}</span>:<span style=color:#f92672>{{</span> .Alerts.Firing | len <span style=color:#f92672>}}{{</span>- end -<span style=color:#f92672>}}</span>
  <span style=color:#f92672>]</span> <span style=color:#f92672>{{</span> .CommonLabels.alertname <span style=color:#f92672>}}</span>
<span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>


<span style=color:#f92672>{{</span> define <span style=color:#e6db74>&#34;slack.scs.text&#34;</span> -<span style=color:#f92672>}}</span>

    <span style=color:#f92672>{{</span> template <span style=color:#e6db74>&#34;__alert_severity&#34;</span> . <span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>index .Alerts 0<span style=color:#f92672>)</span>.Annotations.summary <span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- <span style=color:#e6db74>&#34;\n&#34;</span> -<span style=color:#f92672>}}</span>
    *Summary:* <span style=color:#f92672>{{</span> <span style=color:#f92672>(</span>index .Alerts 0<span style=color:#f92672>)</span>.Annotations.summary <span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

    <span style=color:#f92672>{{</span> range .Alerts <span style=color:#f92672>}}</span>

        <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>if</span> .Annotations.description <span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#e6db74>&#34;\n&#34;</span> -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span> .Annotations.description <span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#e6db74>&#34;\n&#34;</span> -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>if</span> .Annotations.message <span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#e6db74>&#34;\n&#34;</span> -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span> .Annotations.message <span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- <span style=color:#e6db74>&#34;\n&#34;</span> -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

    <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

<span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>

<span style=color:#f92672>{{</span> define <span style=color:#e6db74>&#34;slack.scs.color&#34;</span> -<span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span> <span style=color:#66d9ef>if</span> eq .Status <span style=color:#e6db74>&#34;firing&#34;</span> -<span style=color:#f92672>}}</span>
        <span style=color:#f92672>{{</span> <span style=color:#66d9ef>if</span> eq .CommonLabels.severity <span style=color:#e6db74>&#34;warning&#34;</span> -<span style=color:#f92672>}}</span>
            warning
        <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> eq .CommonLabels.severity <span style=color:#e6db74>&#34;critical&#34;</span> -<span style=color:#f92672>}}</span>
            danger
        <span style=color:#f92672>{{</span>- <span style=color:#66d9ef>else</span> -<span style=color:#f92672>}}</span>
            <span style=color:#75715e>#439FE0</span>
        <span style=color:#f92672>{{</span>- end -<span style=color:#f92672>}}</span>
    <span style=color:#f92672>{{</span> <span style=color:#66d9ef>else</span> -<span style=color:#f92672>}}</span>
    good
    <span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>
<span style=color:#f92672>{{</span>- end <span style=color:#f92672>}}</span>
</code></pre></div><p>{% endtab %}
{% endtabs %}</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents></nav>
</div>
</aside>
</main>
</body>
</html>